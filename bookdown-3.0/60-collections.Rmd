# Text Collections

So far, we have mostly processed single texts. In this chapter, we will cover the important things to know when processing collections of texts -- be it genres or the works of an author. 

The following code can only be reproduced if the GerDraCor data set and the collection repository have been installed. This can be done with the following code (assuming an internet connection).

```{r eval=FALSE}
installData("qd")
installCollectionData()
```

Depending on whether you have done this before, this will either update the data or create it new. Consequently, the output of these functions looks differently.

## Defining collections

Before processing, it's necessary to define a collection of texts, by assembling their ids in a list. These are considered to be sets of plays without internal structure (e.g., no play is marked as prototypical). 

```{r}

# load ids that are comedies and tragedies
ids.tragedy <- unique(loadSet(c("trauerspiel", "tragödie", "tragoedie")))
ids.comedy <- unique(loadSet(c("lustspiel", "komödie", "komoedie")))

# make sure we're using the QuaDramA corpus
ids.tragedy <- sub("tg:", "qd:", ids.tragedy, fixed = TRUE)
ids.comedy <- sub("tg:", "qd:", ids.comedy, fixed = TRUE)

```

## Loading multiple plays

Loading multiple plays at once is straightforward, and not different from loading a single one. We just use a vector of play ids as argument to the `loadDrama()` function.

```{r message=FALSE, results="hide"}
text.tragedies <- loadDrama(ids.tragedy)
text.comedies  <- loadDrama(ids.comedy)
```

This may create a lot of output (suppressed here), telling you about specific plays that could not be loaded (we'll ignore this for the moment).

First, we'll get an overview of the plays that we just loaded. The meta data for tragedies (and comedies) are in a straightforward table:

```{r}
text.tragedies$meta
```


## Analysing multiple plays

As the `QDDrama`-object we are dealing with can represent one or more texts, most functions can just be used with a text collection or a single text, without a difference. However, results may need to handled differently, because we no longer can visualise all individual characters easily.

### Character statistics

It's straightforward to extract character statistics for an entire corpus:
```{r results="hide"}
charStat <- characterStatistics(text.tragedies)
```

Visualising this directly (as we have done in Section \@ref{who-how-much}) works technically, but is not very helpful. Instead, we will formulate a few concrete questions and investigate them:

#### Proportion of characters

What's the proportion of the most (second-most) talkative character, w.r.t. the entire play?

```{r}
charStat <- characterStatistics(text.tragedies)
class(charStat)
```

Although this works technically, it is not very helpful, as the plot contains way too much information too densely. We will 





