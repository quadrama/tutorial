<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Word Field Analysis | DramaAnalysis</title>
  <meta name="description" content="8 Word Field Analysis | DramaAnalysis" />
  <meta name="generator" content="bookdown 0.10 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Word Field Analysis | DramaAnalysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Word Field Analysis | DramaAnalysis" />
  
  
  

<meta name="author" content="Nils Reiter" />


<meta name="date" content="2019-05-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="text-collections.html">
<link rel="next" href="advanced-text-analysis.html">
<script src="assets/jquery-2.2.3/jquery.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#technical-basics"><i class="fa fa-check"></i><b>1.1</b> Technical basics</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#classes"><i class="fa fa-check"></i><b>1.1.1</b> Classes</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#pipelining-with-margrittr"><i class="fa fa-check"></i><b>1.1.2</b> Pipelining with <code>margrittr</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a><ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#origin-tei-xml"><i class="fa fa-check"></i><b>2.1</b> Origin: TEI-XML</a></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#preprocessed-data"><i class="fa fa-check"></i><b>2.2</b> Preprocessed data</a></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#sample-data"><i class="fa fa-check"></i><b>2.3</b> Sample data</a></li>
</ul></li>
<li class="part"><span><b>I Structure Analysis</b></span></li>
<li class="chapter" data-level="3" data-path="whos-talking-how-much.html"><a href="whos-talking-how-much.html"><i class="fa fa-check"></i><b>3</b> Who’s talking how much?</a><ul>
<li class="chapter" data-level="3.1" data-path="whos-talking-how-much.html"><a href="whos-talking-how-much.html#format"><i class="fa fa-check"></i><b>3.1</b> Character names instead of identifiers</a></li>
<li class="chapter" data-level="3.2" data-path="whos-talking-how-much.html"><a href="whos-talking-how-much.html#stacked-bar-plot"><i class="fa fa-check"></i><b>3.2</b> Stacked bar plot</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="whos-talking-how-often.html"><a href="whos-talking-how-often.html"><i class="fa fa-check"></i><b>4</b> Who’s talking how often?</a><ul>
<li class="chapter" data-level="4.1" data-path="whos-talking-how-often.html"><a href="whos-talking-how-often.html#when-are-characters-talking"><i class="fa fa-check"></i><b>4.1</b> When are characters talking?</a></li>
<li class="chapter" data-level="4.2" data-path="whos-talking-how-often.html"><a href="whos-talking-how-often.html#adding-act-boundaries"><i class="fa fa-check"></i><b>4.2</b> Adding act boundaries</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="configuration.html"><a href="configuration.html"><i class="fa fa-check"></i><b>5</b> Configuration</a><ul>
<li class="chapter" data-level="5.1" data-path="configuration.html"><a href="configuration.html#matrices"><i class="fa fa-check"></i><b>5.1</b> Matrices</a><ul>
<li class="chapter" data-level="5.1.1" data-path="configuration.html"><a href="configuration.html#filter"><i class="fa fa-check"></i><b>5.1.1</b> Filtering unimportant characters</a></li>
<li class="chapter" data-level="5.1.2" data-path="configuration.html"><a href="configuration.html#normalization"><i class="fa fa-check"></i><b>5.1.2</b> Normalization</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="configuration.html"><a href="configuration.html#copresence"><i class="fa fa-check"></i><b>5.2</b> Copresence</a><ul>
<li class="chapter" data-level="5.2.1" data-path="configuration.html"><a href="configuration.html#as-heatmap"><i class="fa fa-check"></i><b>5.2.1</b> As Heatmap</a></li>
<li class="chapter" data-level="5.2.2" data-path="configuration.html"><a href="configuration.html#network"><i class="fa fa-check"></i><b>5.2.2</b> As Network</a></li>
<li class="chapter" data-level="5.2.3" data-path="configuration.html"><a href="configuration.html#network-properties"><i class="fa fa-check"></i><b>5.2.3</b> Network properties</a></li>
<li class="chapter" data-level="5.2.4" data-path="configuration.html"><a href="configuration.html#graph-export"><i class="fa fa-check"></i><b>5.2.4</b> Graph Export</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="character-exchange.html"><a href="character-exchange.html"><i class="fa fa-check"></i><b>6</b> Character Exchange</a><ul>
<li class="chapter" data-level="6.1" data-path="character-exchange.html"><a href="character-exchange.html#hamming-distance"><i class="fa fa-check"></i><b>6.1</b> Hamming Distance</a><ul>
<li class="chapter" data-level="6.1.1" data-path="character-exchange.html"><a href="character-exchange.html#normalizedhamming"><i class="fa fa-check"></i><b>6.1.1</b> NormalizedHamming</a></li>
<li class="chapter" data-level="6.1.2" data-path="character-exchange.html"><a href="character-exchange.html#trilcke"><i class="fa fa-check"></i><b>6.1.2</b> Trilcke</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="text-collections.html"><a href="text-collections.html"><i class="fa fa-check"></i><b>7</b> Text Collections</a><ul>
<li class="chapter" data-level="7.1" data-path="text-collections.html"><a href="text-collections.html#defining-collections"><i class="fa fa-check"></i><b>7.1</b> Defining collections</a></li>
<li class="chapter" data-level="7.2" data-path="text-collections.html"><a href="text-collections.html#loading-multiple-plays"><i class="fa fa-check"></i><b>7.2</b> Loading multiple plays</a></li>
</ul></li>
<li class="part"><span><b>II Text Analysis</b></span></li>
<li class="chapter" data-level="8" data-path="word-field-analysis.html"><a href="word-field-analysis.html"><i class="fa fa-check"></i><b>8</b> Word Field Analysis</a><ul>
<li class="chapter" data-level="8.1" data-path="word-field-analysis.html"><a href="word-field-analysis.html#single-word-field"><i class="fa fa-check"></i><b>8.1</b> Single word field</a></li>
<li class="chapter" data-level="8.2" data-path="word-field-analysis.html"><a href="word-field-analysis.html#multiple-word-fields"><i class="fa fa-check"></i><b>8.2</b> Multiple Word Fields</a><ul>
<li class="chapter" data-level="8.2.1" data-path="word-field-analysis.html"><a href="word-field-analysis.html#bar-plot-by-character"><i class="fa fa-check"></i><b>8.2.1</b> Bar plot by character</a></li>
<li class="chapter" data-level="8.2.2" data-path="word-field-analysis.html"><a href="word-field-analysis.html#bar-plot-by-field"><i class="fa fa-check"></i><b>8.2.2</b> Bar plot by field</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="word-field-analysis.html"><a href="word-field-analysis.html#dictionary-based-distance"><i class="fa fa-check"></i><b>8.3</b> Dictionary Based Distance</a></li>
<li class="chapter" data-level="8.4" data-path="word-field-analysis.html"><a href="word-field-analysis.html#development-over-the-course-of-the-play"><i class="fa fa-check"></i><b>8.4</b> Development over the course of the play</a><ul>
<li class="chapter" data-level="8.4.1" data-path="word-field-analysis.html"><a href="word-field-analysis.html#individual-characters"><i class="fa fa-check"></i><b>8.4.1</b> Individual characters</a></li>
<li class="chapter" data-level="8.4.2" data-path="word-field-analysis.html"><a href="word-field-analysis.html#comparing-characters"><i class="fa fa-check"></i><b>8.4.2</b> Comparing characters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="advanced-text-analysis.html"><a href="advanced-text-analysis.html"><i class="fa fa-check"></i><b>9</b> Advanced Text Analysis</a><ul>
<li class="chapter" data-level="9.1" data-path="advanced-text-analysis.html"><a href="advanced-text-analysis.html#when-are-characters-mentioned"><i class="fa fa-check"></i><b>9.1</b> When are characters mentioned?</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="resterampe.html"><a href="resterampe.html"><i class="fa fa-check"></i><b>10</b> Resterampe</a><ul>
<li class="chapter" data-level="10.0.1" data-path="resterampe.html"><a href="resterampe.html#character-meta-data"><i class="fa fa-check"></i><b>10.0.1</b> Character meta data</a></li>
<li class="chapter" data-level="10.0.2" data-path="resterampe.html"><a href="resterampe.html#character-groups"><i class="fa fa-check"></i><b>10.0.2</b> Character groups</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DramaAnalysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="word-field-analysis" class="section level1">
<h1><span class="header-section-number">8</span> Word Field Analysis</h1>
<p>What we consider a word field here may differ from specific uses in linguistics. In this context, a word field is a list of words that belong to a common theme / topic / semantic group. Multiple word fields can be assembled to create a dictionary. On a technical level, what we describe in the following works for arbitrary lists of words. A semantic relation between the words is technically not required. Thus, the following pieces of code can be used with arbitrary word lists.</p>
<p>For <strong>demo purposes</strong> (this is really a toy example), we will define the word field of <code>Love</code> as containing the words <code>Liebe</code> (love) and <code>Herz</code> (heart).
In R, we can put them in a character vector, and we use lemmas:</p>
<pre class="sourceCode r"><code class="sourceCode r">wf_love &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;liebe&quot;</span>, <span class="st">&quot;herz&quot;</span>)</code></pre>
<p>We will test this word field on Emilia Galotti, which should be about love.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;rksp.0&quot;</span>)</code></pre>
<div id="single-word-field" class="section level2">
<h2><span class="header-section-number">8.1</span> Single word field</h2>
<p>The core of the word field analysis is collecting statistics about a dictionary. Therefore, we use the function called <code>dictionaryStatisticsSingle()</code> (single, because we only want to analyse a single word field):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dictionaryStatisticsSingle</span>(
  rksp<span class="fl">.0</span>,              <span class="co"># the text we want to process</span>
  <span class="dt">wordfield=</span>wf_love    <span class="co"># the word field</span>
)</code></pre>
<pre><code>##    corpus  drama        character x
## 1    test rksp.0           angelo 0
## 2    test rksp.0          appiani 0
## 3    test rksp.0         battista 0
## 4    test rksp.0     camillo_rota 0
## 5    test rksp.0  claudia_galotti 2
## 6    test rksp.0            conti 3
## 7    test rksp.0 der_kammerdiener 0
## 8    test rksp.0        der_prinz 8
## 9    test rksp.0           emilia 4
## 10   test rksp.0        marinelli 9
## 11   test rksp.0          odoardo 6
## 12   test rksp.0           orsina 6
## 13   test rksp.0            pirro 0</code></pre>
<p>What this table shows us the number of times the characters in the play use words that appear in this list. By default, these are absolute numbers.</p>
<p>We can visualise these counts in a simple bar chart:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># retrieve counts and replace character ids by names</span>
dstat &lt;-<span class="st"> </span><span class="kw">dictionaryStatisticsSingle</span>(rksp<span class="fl">.0</span>, <span class="dt">wordfield =</span> wf_love) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">format</span>(rksp<span class="fl">.0</span>)

<span class="co"># remove figures not using these words at all</span>
dstat &lt;-<span class="st"> </span>dstat[dstat<span class="op">$</span>x<span class="op">&gt;</span><span class="dv">0</span>,]

<span class="co"># create a bar plot</span>
<span class="kw">barplot</span>(dstat<span class="op">$</span>x,                      <span class="co"># what to plot</span>
        <span class="dt">names.arg =</span> dstat<span class="op">$</span>character,  <span class="co"># x axis labels</span>
        <span class="dt">las=</span><span class="dv">2</span>                         <span class="co"># turn axis labels</span>
)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<p>Apparently, the prince and Marinelli are mentioning these words a lot more than the other characters.</p>
<p>When comparing characters, it often (but not always) makes sense to normalize the counts according to the total number of spoken words by a character. This can be enabled by setting the argument <code>normalizeByFigure=TRUE</code>. This will divide the number of words in this field by the total number of words a character speaks.</p>
<pre class="sourceCode r"><code class="sourceCode r">dstat &lt;-<span class="st"> </span><span class="kw">dictionaryStatisticsSingle</span>(rksp<span class="fl">.0</span>, <span class="dt">wordfield=</span>wf_love,
  <span class="dt">normalizeByFigure =</span> <span class="ot">TRUE</span>   <span class="co"># apply normalization</span>
) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">format</span>(rksp<span class="fl">.0</span>)         <span class="co"># reformat character names</span>

<span class="co"># remove figures not using these words at all</span>
dstat &lt;-<span class="st"> </span>dstat[dstat<span class="op">$</span>x<span class="op">&gt;</span><span class="dv">0</span>,]

<span class="kw">barplot</span>(dstat<span class="op">$</span>x, 
        <span class="dt">names.arg =</span> dstat<span class="op">$</span>character, 
        <span class="dt">las=</span><span class="dv">2</span>            
)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
</div>
<div id="multiple-word-fields" class="section level2">
<h2><span class="header-section-number">8.2</span> Multiple Word Fields</h2>
<p>The function <code>dictionaryStatistics()</code> can be used to analyse multiple dictionaries at once. To this end, dictionaries are represented as lists of character vectors. The (named) outer list contains the keywords, the vectors are just words associated with the keyword.</p>
<p>New dictionaries can be easily created like this:</p>
<pre class="sourceCode r"><code class="sourceCode r">wf &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">Liebe=</span><span class="kw">c</span>(<span class="st">&quot;liebe&quot;</span>,<span class="st">&quot;herz&quot;</span>,<span class="st">&quot;schmerz&quot;</span>), <span class="dt">Hass=</span><span class="kw">c</span>(<span class="st">&quot;hass&quot;</span>,<span class="st">&quot;hassen&quot;</span>))</code></pre>
<p>This dictionary contains the two entries <code>Liebe</code> (love) and <code>Hass</code> (hate), with 3 respective 2 entries. Dictionaries can be created in code, like shown above. In addition, the function <code>loadFields()</code> can be used to download dictionary content from a URL or a directory. By default, the function loads <a href="https://github.com/quadrama/metadata/tree/master/fields/">this dictionary</a> from GitHub (that we used in publications), for the keywords <code>Liebe</code> and <code>Familie</code> (family). Since version 2.3.0, this dictionary is included in the package as <code>base_dictionary</code> and can be used right away (without internet connection). It is also the default dictionary used by <code>dictionaryStatistics()</code>.</p>
<p>The function <code>loadFields()</code> offers parameters to load from different URLs via http or to load from plain text files that are stored locally. The latter can be achieved by specifying the directory as <code>baseurl</code>. Entries for each keyword should then be stored in a file named like the keyword, and ending with <code>txt</code> (by default, can be overwritten). See <code>?loadFields</code> for details. Some of the options can also be specified through <code>dictionaryStatistics()</code>, as exemplified below.</p>
<p>The following examples use the <code>base_dictionary</code>, i.e., a specific version of the fields we have been using in QuaDramA.</p>
<pre class="sourceCode r"><code class="sourceCode r">dstat &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(
  rksp<span class="fl">.0</span>,  <span class="co"># the text</span>
  <span class="dt">fieldnames =</span> <span class="co"># fields we want to measure (from base_dictionary)</span>
    <span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>, <span class="st">&quot;Familie&quot;</span>, <span class="st">&quot;Ratio&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Religion&quot;</span>),
  <span class="dt">normalizeByFigure =</span> <span class="ot">TRUE</span>,   <span class="co"># normalization by figure</span>
  <span class="dt">normalizeByField =</span> <span class="ot">TRUE</span>     <span class="co"># normalization by field</span>
)
dstat</code></pre>
<pre><code>##    corpus  drama        character        Liebe      Familie        Ratio
## 1    test rksp.0           angelo 5.025967e-05 4.314529e-05 7.290755e-05
## 2    test rksp.0          appiani 8.610133e-05 1.355080e-04 6.661338e-05
## 3    test rksp.0         battista 0.000000e+00 1.404988e-04 0.000000e+00
## 4    test rksp.0     camillo_rota 1.003613e-04 1.292324e-04 4.367575e-04
## 5    test rksp.0  claudia_galotti 6.591891e-05 2.350575e-04 3.972037e-05
## 6    test rksp.0            conti 1.531692e-04 5.379043e-05 3.635835e-05
## 7    test rksp.0 der_kammerdiener 0.000000e+00 0.000000e+00 0.000000e+00
## 8    test rksp.0        der_prinz 7.021317e-05 6.974600e-05 4.714313e-05
## 9    test rksp.0           emilia 7.014262e-05 3.311757e-04 4.884005e-05
## 10   test rksp.0        marinelli 8.026020e-05 1.451804e-04 3.991777e-05
## 11   test rksp.0          odoardo 5.895608e-05 2.319657e-04 6.271666e-05
## 12   test rksp.0           orsina 5.259046e-05 8.223048e-05 4.250366e-05
## 13   test rksp.0            pirro 0.000000e+00 1.597508e-04 2.699492e-05
##           Krieg     Religion
## 1  5.624297e-05 0.000000e+00
## 2  4.817575e-05 0.000000e+00
## 3  0.000000e+00 0.000000e+00
## 4  8.423181e-05 0.000000e+00
## 5  4.681329e-05 5.853528e-05
## 6  2.337322e-05 0.000000e+00
## 7  0.000000e+00 0.000000e+00
## 8  2.862261e-05 3.308290e-05
## 9  3.139717e-05 8.482745e-05
## 10 3.528446e-05 1.890842e-05
## 11 4.123417e-05 4.861291e-05
## 12 2.522195e-05 1.238973e-05
## 13 0.000000e+00 1.022966e-04</code></pre>
<p>The variable <code>dstat</code> now contains multiple columns, one for each word field. We have been using the option <code>normalizeByFigure</code> before. When comparing multiple fields, it often happens that they have a different size (i.e., different number of words). In this case, it makes sense to <em>also</em> normalize with the number of words in the word field. This is achieved by <code>normalizeByField=TRUE</code>. This makes the numbers very small, but they should be used in comparison anyway.</p>
<div id="bar-plot-by-character" class="section level3">
<h3><span class="header-section-number">8.2.1</span> Bar plot by character</h3>
<p>It is now straightforward to show the distribution of fields for a single character:</p>
<pre class="sourceCode r"><code class="sourceCode r">mat &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dstat)

<span class="kw">barplot</span>(mat[<span class="dv">9</span>,],     <span class="co"># we select Emilia&#39;s line</span>
        <span class="dt">main=</span><span class="st">&quot;Emilia&#39;s speech&quot;</span>,
        <span class="dt">names.arg=</span><span class="kw">colnames</span>(mat)
)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
</div>
<div id="bar-plot-by-field" class="section level3">
<h3><span class="header-section-number">8.2.2</span> Bar plot by field</h3>
<p>Conversely, we can also show who uses words of a certain field how often:</p>
<pre class="sourceCode r"><code class="sourceCode r">dstat &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(
  rksp<span class="fl">.0</span>,  <span class="co"># the text</span>
  <span class="dt">fieldnames =</span> <span class="co"># fields we want to measure (from base_dictionary)</span>
    <span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>, <span class="st">&quot;Familie&quot;</span>, <span class="st">&quot;Ratio&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Religion&quot;</span>),
  <span class="dt">normalizeByFigure =</span> <span class="ot">TRUE</span>,   <span class="co"># normalization by figure</span>
  <span class="dt">normalizeByField =</span> <span class="ot">TRUE</span>     <span class="co"># normalization by field</span>
) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">format</span>(rksp<span class="fl">.0</span>)
  
mat &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dstat)

<span class="kw">par</span>(<span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">1</span>))

<span class="kw">barplot</span>(mat[,<span class="dv">1</span>],                  <span class="co"># Select the row for &#39;love&#39;</span>
        <span class="dt">main=</span><span class="st">&quot;Use of love words&quot;</span>, <span class="co"># title for plot</span>
        <span class="dt">beside =</span> <span class="ot">TRUE</span>,            <span class="co"># not stacked</span>
        <span class="dt">names.arg =</span> dstat<span class="op">$</span>character,   <span class="co"># x axis labels</span>
        <span class="dt">las=</span><span class="dv">2</span>                     <span class="co"># rotation for labels</span>
)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
</div>
</div>
<div id="dictionary-based-distance" class="section level2">
<h2><span class="header-section-number">8.3</span> Dictionary Based Distance</h2>
<p>Technically, the output of <code>dictionaryStatistics()</code> is a <code>data.frame</code>. This is suitable for most uses. In some cases, however, it’s more suited to work with a matrix that only contains the raw numbers (i.e., number of family words). Calculating character distance based on dictionaries, for instance. For these cases, the package provides an S3 method that extracts the numeric part of the data.frame and creates a matrix. We have used this function <code>as.matrix()</code> already above.</p>
<p>The matrix doesn’t have row names by default. The snippet below can be used to add row names.</p>
<pre class="sourceCode r"><code class="sourceCode r">ds &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(rksp<span class="fl">.0</span>, 
                            <span class="dt">fieldnames=</span><span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>, <span class="st">&quot;Familie&quot;</span>, <span class="st">&quot;Ratio&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Religion&quot;</span>),
                            <span class="dt">normalizeByFigure=</span><span class="ot">TRUE</span>)
m &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(ds)
<span class="kw">rownames</span>(m) &lt;-<span class="st"> </span>ds<span class="op">$</span>character
m</code></pre>
<pre><code>##                        Liebe     Familie       Ratio       Krieg
## angelo           0.004724409 0.003149606 0.007874016 0.006299213
## appiani          0.008093525 0.009892086 0.007194245 0.005395683
## battista         0.000000000 0.010256410 0.000000000 0.000000000
## camillo_rota     0.009433962 0.009433962 0.047169811 0.009433962
## claudia_galotti  0.006196378 0.017159199 0.004289800 0.005243089
## conti            0.014397906 0.003926702 0.003926702 0.002617801
## der_kammerdiener 0.000000000 0.000000000 0.000000000 0.000000000
## der_prinz        0.006600038 0.005091458 0.005091458 0.003205733
## emilia           0.006593407 0.024175824 0.005274725 0.003516484
## marinelli        0.007544458 0.010598168 0.004311119 0.003951859
## odoardo          0.005541872 0.016933498 0.006773399 0.004618227
## orsina           0.004943503 0.006002825 0.004590395 0.002824859
## pirro            0.000000000 0.011661808 0.002915452 0.000000000
##                      Religion
## angelo           0.0000000000
## appiani          0.0000000000
## battista         0.0000000000
## camillo_rota     0.0000000000
## claudia_galotti  0.0033365110
## conti            0.0000000000
## der_kammerdiener 0.0000000000
## der_prinz        0.0018857251
## emilia           0.0048351648
## marinelli        0.0010777798
## odoardo          0.0027709360
## orsina           0.0007062147
## pirro            0.0058309038</code></pre>
<p>Every character is now represented with five numbers, which can be interpreted as a vector in five-dimensional space. This means, we can easily apply distance metrics supplied by the function <code>dist()</code> (from the default package <code>stats</code>). By default, <code>dist()</code> calculates <a href="https://en.wikipedia.org/wiki/Euclidean_distance">Euclidean distance</a>.</p>
<pre class="sourceCode r"><code class="sourceCode r">cdist &lt;-<span class="st"> </span><span class="kw">dist</span>(m)
<span class="co"># output not shown</span></code></pre>
<p>The resulting data structure is similar to the one in the weighted configuration matrix, which means everything from <a href="configuration.html#network">Section 5.2.2</a> can be applied here.
In particular, we can convert these distances into a network:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(igraph)
g &lt;-<span class="st"> </span><span class="kw">graph_from_adjacency_matrix</span>(<span class="kw">as.matrix</span>(cdist), 
                                 <span class="dt">weighted=</span><span class="ot">TRUE</span>,     <span class="co"># weighted graph</span>
                                 <span class="dt">mode=</span><span class="st">&quot;undirected&quot;</span>, <span class="co"># no direction</span>
                                 <span class="dt">diag=</span><span class="ot">FALSE</span>         <span class="co"># no looping edges</span>
                                )</code></pre>
<p>This network can of course be visualised again.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Now we plot</span>
<span class="kw">plot.igraph</span>(g, 
            <span class="dt">layout=</span>layout_with_fr,       <span class="co"># how to lay out the graph</span>
            <span class="dt">main=</span><span class="st">&quot;Dictionary distance network&quot;</span>,  <span class="co"># title</span>
            <span class="dt">vertex.label.cex=</span><span class="fl">0.6</span>,         <span class="co"># label size</span>
            <span class="dt">vertex.label.color=</span><span class="st">&quot;black&quot;</span>,   <span class="co"># font color</span>
            <span class="dt">vertex.color=</span>qd.colors[<span class="dv">5</span>],    <span class="co"># vertex color</span>
            <span class="dt">vertex.frame.color=</span><span class="ot">NA</span>,        <span class="co"># no vertex border</span>
            <span class="dt">edge.width=</span><span class="kw">E</span>(g)<span class="op">$</span>weight<span class="op">*</span><span class="dv">100</span>    <span class="co"># scale edges according to their weight </span>
                                          <span class="co"># (since the distances are so small, we multiply)</span>
            )  </code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<p>Although this network is similar to the one shown in <a href="configuration.html#network">Section 5.2.2</a> (both undirected and weighted), it displays a totally different kind of information. The networks based on copresence connect characters that appear together on stage, while this network connects characters with similar thematic profile in their speech (within the limits of being able to detect thematic profiles via word fields).</p>
</div>
<div id="development-over-the-course-of-the-play" class="section level2">
<h2><span class="header-section-number">8.4</span> Development over the course of the play</h2>
<p>Finally, the function <code>dictionaryStatistics()</code> can be used to track word field for segments of the play. To do that, we use the parameter <code>segment</code>, and set it to either “Act” or “Scene”.</p>
<div id="individual-characters" class="section level3">
<h3><span class="header-section-number">8.4.1</span> Individual characters</h3>
<p>We can now plot the theme progress over the course of the play. This can be done for specific characters, as shown below.</p>
<pre class="sourceCode r"><code class="sourceCode r">dsl &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(rksp<span class="fl">.0</span>, 
                            <span class="dt">fieldnames=</span><span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>, <span class="st">&quot;Familie&quot;</span>, <span class="st">&quot;Ratio&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Religion&quot;</span>),
                            <span class="dt">normalizeByFigure=</span><span class="ot">TRUE</span>,
                            <span class="dt">segment=</span><span class="st">&quot;Act&quot;</span>)

mat &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dsl[dsl<span class="op">$</span>character<span class="op">==</span><span class="st">&quot;marinelli&quot;</span>,])

<span class="kw">matplot</span>(mat, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">col=</span><span class="st">&quot;black&quot;</span>)
<span class="kw">legend</span>(<span class="dt">x=</span><span class="st">&quot;topleft&quot;</span>,<span class="dt">legend=</span><span class="kw">colnames</span>(mat), <span class="dt">lty=</span><span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(dsl))</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<p>Depending on the use case, it might be easier to interpret if the numbers are cumulatively added up. The snippet below shows how this works.</p>
<pre class="sourceCode r"><code class="sourceCode r">dsl &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(rksp<span class="fl">.0</span>, 
                            <span class="dt">fieldnames=</span><span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>, <span class="st">&quot;Familie&quot;</span>, <span class="st">&quot;Ratio&quot;</span>, <span class="st">&quot;Krieg&quot;</span>, <span class="st">&quot;Religion&quot;</span>),
                            <span class="dt">normalizeByFigure=</span><span class="ot">TRUE</span>,
                            <span class="dt">segment=</span><span class="st">&quot;Act&quot;</span>) 

mat &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dsl[dsl<span class="op">$</span>character<span class="op">==</span><span class="st">&quot;marinelli&quot;</span>,])

mat &lt;-<span class="st"> </span><span class="kw">apply</span>(mat,<span class="dv">2</span>,cumsum)

<span class="kw">matplot</span>(mat, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">col=</span><span class="st">&quot;black&quot;</span>)

<span class="co"># Add act lines</span>
<span class="kw">abline</span>(<span class="dt">v=</span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(mat))

<span class="kw">legend</span>(<span class="dt">x=</span><span class="st">&quot;topleft&quot;</span>, <span class="dt">legend=</span><span class="kw">colnames</span>(mat), <span class="dt">lty=</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-51-1.png" width="672" /></p>
</div>
<div id="comparing-characters" class="section level3">
<h3><span class="header-section-number">8.4.2</span> Comparing characters</h3>
<p>Simultaneously to the setting above, we now want to compare the development of several characters for a single word field. This unfortunately requires some reshuffling of the data, using the function <code>reshape</code> (from the <code>stats</code> package).</p>
<pre class="sourceCode r"><code class="sourceCode r">dsl &lt;-<span class="st"> </span><span class="kw">dictionaryStatistics</span>(rksp<span class="fl">.0</span>, 
                            <span class="dt">fieldnames=</span><span class="kw">c</span>(<span class="st">&quot;Liebe&quot;</span>),
                            <span class="dt">normalizeByFigure=</span><span class="ot">TRUE</span>,
                            <span class="dt">segment=</span><span class="st">&quot;Act&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(rksp<span class="fl">.0</span>,
         <span class="dt">threshold =</span> <span class="dv">6</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">format</span>(rksp<span class="fl">.0</span>)

dsl &lt;-<span class="st"> </span><span class="kw">reshape</span>(dsl, <span class="dt">direction =</span> <span class="st">&quot;wide&quot;</span>,  <span class="co"># the table becomes wider</span>
               <span class="dt">timevar =</span> <span class="st">&quot;Number.Act&quot;</span>,   <span class="co"># the column that specifies multiple readings</span>
               <span class="dt">times =</span> <span class="st">&quot;Liebe&quot;</span>,          <span class="co"># the number to distribute</span>
               <span class="dt">idvar=</span><span class="kw">c</span>(<span class="st">&quot;corpus&quot;</span>,<span class="st">&quot;drama&quot;</span>,<span class="st">&quot;character&quot;</span>)   <span class="co"># what identifies a character</span>
)

mat &lt;-<span class="st"> </span><span class="kw">as.matrix.data.frame</span>(dsl[,<span class="dv">4</span><span class="op">:</span><span class="kw">ncol</span>(dsl)])
<span class="kw">rownames</span>(mat) &lt;-<span class="st"> </span>dsl<span class="op">$</span>character
mat &lt;-<span class="st"> </span><span class="kw">apply</span>(mat,<span class="dv">1</span>,cumsum)

<span class="kw">matplot</span>(mat, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">lty =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(mat), <span class="dt">col=</span><span class="st">&quot;black&quot;</span>, <span class="dt">main=</span><span class="st">&quot;Liebe&quot;</span>)
<span class="kw">legend</span>(<span class="dt">x=</span><span class="st">&quot;topleft&quot;</span>, <span class="dt">legend=</span><span class="kw">colnames</span>(mat), <span class="dt">lty=</span><span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(mat))</code></pre>
<p><img src="DramaAnalysis_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="text-collections.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advanced-text-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/lunr.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["DramaAnalysis.pdf", "DramaAnalysis.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "static"
}
});
});
</script>

</body>

</html>
